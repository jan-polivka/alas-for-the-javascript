<body onload="loadSite()">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<a href="/">Go Home</a><br>


<p id ="descriptionSec">
    
    <b>Stowaway</b>
    <br>
    You've got no idea where you're going, and even less where you'll end up – but you  don't  care.
    Wherever  it  is,  it  has  got  to  be  better  than  the  hellhole  you  came from. 
    You're leaving, and your only regret is that you didn't do it sooner. It's time to make your own way in this world.
    To live your life the way you choose. And nothing, not hell or high water, will ever, ever, make you go back.
    <br>
    <br>
    
    <b>Never Be Found</b>
    <br>When you dirty your hands to get things done, <b>ROLL+BRAWN</b><br>
    <b>ON A 10+</b>: All 3<br>
    <b>ON A 7-9</b>: Choose 2<br>
    You leave nothing at the scene.<br>
    There are no whispers or rumours about your involvement.<br>
    You see, hear or find something of interest.<br>
    <b>ON A MISS</b>: You're caught red handed by someone who trusts you.
    
    
    <br>
    <br>
    <input type="submit" value="Next" onclick="submitFunc()" id="appearanceButton">
    
</p>

<p id="nameAppearanceSec">

     

    <style type="text/css">
    .tg  {border-collapse:collapse;border-spacing:0;}
    .tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg .tg-c3ow{border-color:inherit;text-align:center;vertical-align:top}
    </style>
    <table class="tg">
    <thead>
      <tr>
        <th class="tg-c3ow">Name</th>
        <th class="tg-c3ow" colspan="4"><input type="text" id="charName" name="charName" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"><br></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="tg-c3ow" colspan="5">Appearance</td>
      </tr>
      <tr>
        <td class="tg-c3ow">Gender</td>
        <td class="tg-0pky"><input type="radio" id="male" name="gender" value="male" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="male">Male</label></td>
        <td class="tg-0pky"><input type="radio" id="female" name="gender" value="female" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="female">Female</label></td>
        <td class="tg-0pky"><input type="radio" id="nonbinary" name="gender" value="nonbinary" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="nonbinary">Nonbinary</label></td>
        <td class="tg-0pky"></td>
      </tr>
      <tr>
        <td class="tg-c3ow">Eyes</td>
        <td class="tg-0pky"><input type="radio" id="haunted" name="eyes" value="haunted" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="haunted">haunted</label></td>
        <td class="tg-0pky"><input type="radio" id="nervous" name="eyes" value="nervous" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="nervous">nervous</label></td>
        <td class="tg-0pky"><input type="radio" id="forceful" name="eyes" value="forceful" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="forceful">forceful</label></td>
        <td class="tg-0pky"><input type="radio" id="eager" name="eyes" value="eager" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="eager">eager</label></td>
      </tr>
      <tr>
        <td class="tg-c3ow">Face</td>
        <td class="tg-0pky"><input type="radio" id="brave" name="face" value="brave" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="brave">brave</label></td>
        <td class="tg-0pky"><input type="radio" id="wild" name="face" value="wild" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="wild">wild</label></td>
        <td class="tg-0pky"><input type="radio" id="sunken" name="face" value="sunken" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="sunken">sunken</label></td>
        <td class="tg-0pky"><input type="radio" id="sullen" name="face" value="sullen" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="sullen">sullen</label></td>
      </tr>
      <tr>
        <td class="tg-c3ow">Body</td>
        <td class="tg-0pky"><input type="radio" id="sickly" name="body" value="sickly" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="sickly">sickly</label></td>
        <td class="tg-0pky"><input type="radio" id="young" name="body" value="young" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="young">young</label></td>
        <td class="tg-0pky"><input type="radio" id="gentle" name="body" value="gentle" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="gentle">gentle</label></td>
      </tr>
      <tr>
        <td class="tg-c3ow">Dress</td>
        <td class="tg-0pky"><input type="radio" id="cloak" name="dress" value="cloak" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="cloak">hooded cloak</label></td>
        <td class="tg-0pky"><input type="radio" id="outfit" name="dress" value="outfit" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="outfit">oversized sailor's outfit</label></td>
        <td class="tg-0pky"><input type="radio" id="silks" name="dress" value="silks" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="silks">finely made silks</label></td>
      </tr>
    </tbody>
    </table>
    <br>
        <input type="submit" value="Next" onclick="submitFunc()" id="appearanceButton">
        

        
        

</p>

<p id="statsSec">
        
    <style type="text/css">
    .tg  {border-collapse:collapse;border-spacing:0;}
    .tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg .tg-wp8o{border-color:#000000;text-align:center;vertical-align:top}
    </style>
    <table class="tg">
    <thead>
      <tr>
        <th class="tg-wp8o" colspan="2">Stats</th>
      </tr>
      <tr>
        <th class="tg-wp8o" colspan="2">Allocate: 2,0,0,-1</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="tg-wp8o">Brains</td>
        <!-- <td class="tg-wp8o">+2</td> -->
        <td class="tg-wp8o"><input type="text" id="brains" name="brains" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"></td>
      </tr>
      <tr>
        <td class="tg-wp8o">Brawn</td>
        <!-- <td class="tg-wp8o">+2</td> -->
        <td class="tg-wp8o"><input type="text" id="brawn" name="brawn" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"></td>
      </tr>
      <tr>
        <td class="tg-wp8o">Beauty</td>
        <!-- <td class="tg-wp8o">+2</td> -->
        <td class="tg-wp8o"><input type="text" id="beauty" name="beauty" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"></td>
      </tr>
      <tr>
        <td class="tg-wp8o">Balance</td>   
        <td class="tg-wp8o">+2</td>        
        <!-- <td class="tg-wp8o"><input type="text" id="balance" name="balance" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"></td> -->
      </tr>
      <tr>
        <td class="tg-wp8o">Beyond</td>
        <!-- <td class="tg-wp8o">+2</td> -->
        <td class="tg-wp8o"><input type="text" id="beyond" name="beyond" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"></td>
      </tr>
    </tbody>
    </table>
    <br>
    
    
    <input type="submit" value="Next" onclick="submitFunc()" id="statsButton">
    <p style="color:red" id="statsWarning"><b>You did not allocate properly</b></p>
    
</p>

<p id="bondsSec">
        Bonds
        <br>
        <br>    
        <input type="text" id="bondOne" name="bondOne" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"> promised to help you escape from your old
        life. They’re the only one that knew you snuck aboard.
        <br>
        <br>
        You've heard much about 
        <input type="text" id="bondTwo" name="bondTwo" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"> and dream of learning from them.
        <br>
        <br> 
        You're worried 
        <input type="text" id="bondThree" name="bondThree" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"> plans to send you back where you
        came from.
        <br>
        <br>
        <input type="text" id="bondFour" name="bondFour" autocomplete="off" onkeyup="extractText(this.value, this.id)"> is convinced you're up to no good
        and is trying their best to prove it.
        <br>
        <br>
        <input type="submit" value="Next" onclick="submitFunc()" id="bondsButton">
        
        
        
</p>


</body>

<script>

var section = 0;
var sectionList = ['descriptionSec',"nameAppearanceSec", "statsSec", "bondsSec"];
                        
let attributesDict = {'charName':'', 'gender':'', 'eyes':'', 'face':'', 'body':'', 'dress':'',
                        'brains':0, 'brawn':0, 'beauty':0, 'balance':2, 'beyond':0, 'bondOne':'',
                        'bondTwo':'', 'bondThree':'', 'bondFour':'', 'health':4,
                        'specialMove':'<b>Never Be Found</b><br>When you dirty your hands to get things done, <b>ROLL+BRAWN</b><br>'+
                        '<b>ON A 10+</b>: All 3<br>' +
                        '<b>ON A 7-9</b>: Choose 2<br>'+
                        'You leave nothing at the scene.<br>'+
                        'There are no whispers or rumours about your involvement.<br>'+
                        'You see, hear or find something of interest.<br>'+
                        '<b>ON A MISS</b>: You\'re caught red handed by someone who trusts you.',
                        'equipment':'A sharpened blade (1 harm, hand weapon)<br>'+
                        'An ornate, rare, or beautiful keepsake from your home<br>' + 
                        'Enough money for a week of food and lodgings<br>'};

function loadSite()
{
    sectionList.forEach(function (item, index) {
        if (item != "descriptionSec")
        {
            document.getElementById(item).style.display = "none";
        }
    });
    document.getElementById('statsWarning').style.display = "none";

}

function submitFunc()
{     
    if (section >= sectionList.length - 1)
    {
        section = sectionList.length - 1;
        sendData();
        
    }
    else if (sectionList[section] == 'statsSec')
    {
        let statsSum = attributesDict['brains'] + attributesDict['brawn'] + attributesDict['beauty'];
        statsSum = statsSum + attributesDict['balance'] + attributesDict['beyond'];        
        if (statsSum == 3)
        {
            
            document.getElementById('statsWarning').style.display = "none";
            document.getElementById(sectionList[section]).style.display = "none";
            section++;
            document.getElementById(sectionList[section]).style.display = "block";
        }
        else
            document.getElementById('statsWarning').style.display = "block";
        
    
    }
    else
    {
        document.getElementById(sectionList[section]).style.display = "none";
        section++;
        document.getElementById(sectionList[section]).style.display = "block";
    }
    
}

function sendData()
{
    console.log("send");
    console.log(attributesDict);
    
    
    console.log(attributesDict);
    
    let xhr = new XMLHttpRequest(); 
    let url = "characterSave?char=stowaway";

    // open a connection 
    xhr.open("POST", url, true); 

    // Set the request header i.e. which type of content you are sending 
    xhr.setRequestHeader("Content-Type", "application/json"); 

    // Create a state change callback 
    
    xhr.onreadystatechange = function () { 
        if (xhr.readyState === 4 && xhr.status === 200) { 

            // Print received data from server 
            //result.innerHTML = this.responseText;
            //console.log(this.responseText);
            if (this.responseText == 'ok')
                window.location.replace("characterEx?char=stowaway");            
            else if(this.responseText == 'bad')
            {
                alert('This character already exists, please pick a different one');
                window.location.replace("/");  
            }

        } 
    }; 

    console.log(attributesDict);
    // Converting JSON data to string 
    var data = JSON.stringify(attributesDict); 

    // Sending data with the request 
    xhr.send(data);
    
}

function extractText(text, id)
{
    if (id == 'brains' || id == 'brawn' || id == 'beauty' || id == 'balance' || id == 'beyond')
        attributesDict[id] = parseInt(text);
    else if (id == 'bondOne')
        attributesDict[id] = '<b>' + text + '</b>promised to help you escape from your old life. They’re the only one that knew you snuck aboard.';
    else if (id == 'bondTwo')
        attributesDict[id] = 'You\'ve heard much about <b>' + text + '</b> and dream of learning from them.';
    else if (id == 'bondThree')
        attributesDict[id] = 'You\'re worried  <b>' + text + '</b> plans to send you back where you came from.';
    else if (id == 'bondFour')
        attributesDict[id] = 'When your temper gets the best of you, <b>' + text + '</b> is convinced you\'re up to no good and is trying their best to prove it.';
    else
        attributesDict[id] = text;

}

function appearanceSel(id, name)
{
    if (name == 'gender')
        attributesDict['gender'] = id.charAt(0).toUpperCase() + id.slice(1);
    else if (name == 'eyes')
        attributesDict['eyes'] = id.charAt(0).toUpperCase() + id.slice(1);
    else if (name == 'face')
        attributesDict['face'] = id.charAt(0).toUpperCase() + id.slice(1);
    else if (name == 'body')
        attributesDict['body'] = id.charAt(0).toUpperCase() + id.slice(1);
    else if (name == 'dress')
    {
        if (id == 'cloak')
            attributesDict['dress'] = 'hooded cloak';
        if (id == 'oversized')
            attributesDict['dress'] = 'oversized sailor\'s outfit';
        if (id == 'outfit')
            attributesDict['dress'] = 'finely made silks';
    }
    else
        console.log("appearance went wrong");
    
}

</script>