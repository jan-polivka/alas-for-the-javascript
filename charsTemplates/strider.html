<body onload="loadSite()">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<a href="/">Go Home</a><br>


<p id ="descriptionSec">
    
    <b>Strider</b>
    <br>
    Every man aboard this ship has to eat, and it's painfully clear none of the dry store  is
    what  an  ordinary  man  would  call  "food".  That's  where  you  come  in. Whether it lives in 
    the sea, beach, forest or mountain you know how to find it, how to kill it, and how to eat it.
    But you're more than that. You're also an expert navigator, an even better tracker, and ingeniously
    resourceful no matter what you have on hand.
    
    <br>
    <br>
    
    <b>Innate Compass</b>
    <br>When you are looking for a specific location, tell the GM what place, <b>ROLL+BEYOND</b><br>
    <b>ON A 10+</b>: You find it, you're there if you want to be.<br>
    <b>ON A 7-9</b>: You know the way.<br>
    <b>ON A MISS</b>: The GM makes things worse.<br>
    
    <br>
    <input type="submit" value="Next" onclick="submitFunc()" id="appearanceButton">
    

    
</p>

<p id="nameAppearanceSec">

     

    <style type="text/css">
    .tg  {border-collapse:collapse;border-spacing:0;}
    .tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg .tg-c3ow{border-color:inherit;text-align:center;vertical-align:top}
    </style>
    <table class="tg">
    <thead>
      <tr>
        <th class="tg-c3ow">Name</th>
        <th class="tg-c3ow" colspan="4"><input type="text" id="charName" name="charName" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"><br></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="tg-c3ow" colspan="5">Appearance</td>
      </tr>
      <tr>
        <td class="tg-c3ow">Gender</td>
        <td class="tg-0pky"><input type="radio" id="male" name="gender" value="male" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="male">Male</label></td>
        <td class="tg-0pky"><input type="radio" id="female" name="gender" value="female" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="female">Female</label></td>
        <td class="tg-0pky"><input type="radio" id="nonbinary" name="gender" value="nonbinary" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="nonbinary">Nonbinary</label></td>
        <td class="tg-0pky"></td>
      </tr>
      <tr>
        <td class="tg-c3ow">Eyes</td>
        <td class="tg-0pky"><input type="radio" id="winking" name="eyes" value="winking" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="winking">winking</label></td>
        <td class="tg-0pky"><input type="radio" id="dark" name="eyes" value="dark" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="dark">dark</label></td>
        <td class="tg-0pky"><input type="radio" id="faraway" name="eyes" value="faraway" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="faraway">faraway</label></td>
        <td class="tg-0pky"><input type="radio" id="hawk" name="eyes" value="hawk" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="hawk">hawk</label></td>
      </tr>
      <tr>
        <td class="tg-c3ow">Face</td>
        <td class="tg-0pky"><input type="radio" id="gaunt" name="face" value="gaunt" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="gaunt">gaunt</label></td>
        <td class="tg-0pky"><input type="radio" id="tanned" name="face" value="tanned" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="tanned">tanned</label></td>
        <td class="tg-0pky"><input type="radio" id="honest" name="face" value="honest" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="honest">honest</label></td>
        <td class="tg-0pky"><input type="radio" id="cruel" name="face" value="cruel" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="cruel">cruel</label></td>
      </tr>
      <tr>
        <td class="tg-c3ow">Body</td>
        <td class="tg-0pky"><input type="radio" id="reedy" name="body" value="reedy" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="reedy">reedy</label></td>
        <td class="tg-0pky"><input type="radio" id="sturdy" name="body" value="sturdy" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="sturdy">sturdy</label></td>
        <td class="tg-0pky"><input type="radio" id="wiry" name="body" value="wiry" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="wiry">wiry</label></td>
      </tr>
      <tr>
        <td class="tg-c3ow">Dress</td>
        <td class="tg-0pky"><input type="radio" id="coat" name="dress" value="coat" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="coat">Versatile oilskin coat</label></td>
        <td class="tg-0pky"><input type="radio" id="outfit" name="dress" value="outfit" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="outfit">Musty hunter's outfit</label></td>
        <td class="tg-0pky"><input type="radio" id="clothes" name="dress" value="clothes" onclick="appearanceSel(this.id, this.name)" autocomplete="off">
        <label for="clothes">Clothes adorned with native trinkets</label></td>
        <td class="tg-0pky"></td>
      </tr>
    </tbody>
    </table>
    <br>
        <input type="submit" value="Next" onclick="submitFunc()" id="appearanceButton">
        

        
        

</p>

<p id="statsSec">
        
    <style type="text/css">
    .tg  {border-collapse:collapse;border-spacing:0;}
    .tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg .tg-wp8o{border-color:#000000;text-align:center;vertical-align:top}
    </style>
    <table class="tg">
    <thead>
      <tr>
        <th class="tg-wp8o" colspan="2">Stats</th>
      </tr>
      <tr>
        <th class="tg-wp8o" colspan="2">Allocate: 2,1,1,0,-1</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="tg-wp8o">Brains</td>
        <!-- <td class="tg-wp8o">+2</td> -->
        <td class="tg-wp8o"><input type="text" id="brains" name="brains" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"></td>
      </tr>
      <tr>
        <td class="tg-wp8o">Brawn</td>
        <!-- <td class="tg-wp8o">+2</td> -->
        <td class="tg-wp8o"><input type="text" id="brawn" name="brawn" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"></td>
      </tr>
      <tr>
        <td class="tg-wp8o">Beauty</td>
        <!-- <td class="tg-wp8o">+2</td> -->
        <td class="tg-wp8o"><input type="text" id="beauty" name="beauty" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"></td>
      </tr>
      <tr>
        <td class="tg-wp8o">Balance</td>   
        <!-- <td class="tg-wp8o">+2</td>         -->
        <td class="tg-wp8o"><input type="text" id="balance" name="balance" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"></td>
      </tr>
      <tr>
        <td class="tg-wp8o">Beyond</td>
        <!-- <td class="tg-wp8o">+2</td> -->
        <td class="tg-wp8o"><input type="text" id="beyond" name="beyond" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"></td>
      </tr>
    </tbody>
    </table>
    <br>
    
    
    <input type="submit" value="Next" onclick="submitFunc()" id="statsButton">
    <p style="color:red" id="statsWarning"><b>You did not allocate properly</b></p>
    
</p>

<p id="bondsSec">
        Bonds
        <br>
        <br>    
        <input type="text" id="bondOne" name="bondOne" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"> has once racked up a debt and
        left you to pay the bill.
        <br>
        <br>
        You and 
        <input type="text" id="bondTwo" name="bondTwo" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"> spent a questionable night
        huddled together during a snowstorm.
        <br>
        <br> 
        You and 
        <input type="text" id="bondThree" name="bondThree" value="" autocomplete="off" onkeyup="extractText(this.value, this.id)"> once hunted a giant seal
        together.
        <br>
        <br>
        You never lose your way but when you do,
        <input type="text" id="bondFour" name="bondFour" autocomplete="off" onkeyup="extractText(this.value, this.id)"> is the only person you look 
        to for guidance.
        <br>
        <br>
        <input type="submit" value="Next" onclick="submitFunc()" id="bondsButton">
        
        
        
</p>


</body>

<script>

var section = 0;
var sectionList = ['descriptionSec',"nameAppearanceSec", "statsSec", "bondsSec"];
                        
let attributesDict = {'charName':'', 'gender':'', 'eyes':'', 'face':'', 'body':'', 'dress':'',
                        'brains':0, 'brawn':0, 'beauty':0, 'balance':0, 'beyond':0, 'bondOne':'',
                        'bondTwo':'', 'bondThree':'', 'bondFour':'', 'health':4,
                        'specialMove':'<b>Innate Compass</b><br>When you are looking for a specific location, tell the GM what place, <b>ROLL+BEYOND</b><br>'+
                        '<b>ON A 10+</b>: You find it, you\'re there if you want to be.<br>' +
                        '<b>ON A 7-9</b>: You know the way.<br>'+
                        '<b>ON A MISS</b>: The GM makes things worse.<br>',
                        'equipment':'Hunting knife (1 harm, hand weapon)<br>'+
                        'Silenced rifle (2 harm, far,silenced)<br>' + 
                        'Hunting clothes (2 armour)<br>' + 
                        'A Strider\'s wage (average)<br>'};

function loadSite()
{
    sectionList.forEach(function (item, index) {
        if (item != "descriptionSec")
        {
            document.getElementById(item).style.display = "none";
        }
    });
    document.getElementById('statsWarning').style.display = "none";

}

function submitFunc()
{     
    if (section >= sectionList.length - 1)
    {
        section = sectionList.length - 1;
        sendData();
        
    }
    else if (sectionList[section] == 'statsSec')
    {
        let statsSum = attributesDict['brains'] + attributesDict['brawn'] + attributesDict['beauty'];
        statsSum = statsSum + attributesDict['balance'] + attributesDict['beyond'];        
        if (statsSum == 3)
        {
            
            document.getElementById('statsWarning').style.display = "none";
            document.getElementById(sectionList[section]).style.display = "none";
            section++;
            document.getElementById(sectionList[section]).style.display = "block";
        }
        else
            document.getElementById('statsWarning').style.display = "block";
        
    
    }
    else
    {
        document.getElementById(sectionList[section]).style.display = "none";
        section++;
        document.getElementById(sectionList[section]).style.display = "block";
    }
    
}

function sendData()
{
    console.log("send");
    console.log(attributesDict);
    
    
    console.log(attributesDict);
    
    let xhr = new XMLHttpRequest(); 
    let url = "characterSave?char=strider";

    // open a connection 
    xhr.open("POST", url, true); 

    // Set the request header i.e. which type of content you are sending 
    xhr.setRequestHeader("Content-Type", "application/json"); 

    // Create a state change callback 
    
    xhr.onreadystatechange = function () { 
        if (xhr.readyState === 4 && xhr.status === 200) { 

            // Print received data from server 
            //result.innerHTML = this.responseText;
            //console.log(this.responseText);
            if (this.responseText == 'ok')
                window.location.replace("characterEx?char=strider");            
            else if(this.responseText == 'bad')
            {
                alert('This character already exists, please pick a different one');
                window.location.replace("/");  
            }

        } 
    }; 

    console.log(attributesDict);
    // Converting JSON data to string 
    var data = JSON.stringify(attributesDict); 

    // Sending data with the request 
    xhr.send(data);
    
}

function extractText(text, id)
{
    if (id == 'brains' || id == 'brawn' || id == 'beauty' || id == 'balance' || id == 'beyond')
        attributesDict[id] = parseInt(text);
    else if (id == 'bondOne')
        attributesDict[id] = '<b>' + text + '</b> has once racked up a debt and left you to pay the bill.';
    else if (id == 'bondTwo')
        attributesDict[id] = 'You and <b>' + text + '</b> spent a questionable night huddled together during a snowstorm.';
    else if (id == 'bondThree')
        attributesDict[id] = 'You and <b>' + text + '</b> once hunted a giant seal together.';
    else if (id == 'bondFour')
        attributesDict[id] = 'You never lose your way but when you do, <b>' + text + '</b> is the only person you look to for guidance.';
    else
        attributesDict[id] = text;

}

function appearanceSel(id, name)
{
    if (name == 'gender')
        attributesDict['gender'] = id.charAt(0).toUpperCase() + id.slice(1);
    else if (name == 'eyes')
        attributesDict['eyes'] = id.charAt(0).toUpperCase() + id.slice(1);
    else if (name == 'face')
        attributesDict['face'] = id.charAt(0).toUpperCase() + id.slice(1);
    else if (name == 'body')
        attributesDict['body'] = id.charAt(0).toUpperCase() + id.slice(1);
    else if (name == 'dress')
    {
        if (id == 'coat')
            attributesDict['dress'] = 'Versatile oilskin coat';
        if (id == 'outfit')
            attributesDict['dress'] = 'Musty hunter\'s outfit';
        if (id == 'clothes')
            attributesDict['dress'] = 'Clothes adorned with native trinkets';
    }
    else
        console.log("appearance went wrong");
    
}

</script>